# hamster-kombat-farm

Прототип “фермы” аккаунтов и генератора ключей мини‑игр на **Node.js/TypeScript** с хранением данных в **SQLite (Prisma)**.

**Статус разработки**: **Отменён / Archived**  

### Что это

Репозиторий — попытка собрать каркас сервиса, который:

- хранит аккаунты и их состояние в БД;
- выбирает “готовые к запуску” аккаунты по `next_start_timestamp`;
- (в задумке) обрабатывает запросы на ключи мини‑игр и сохраняет результат.

### Дисклеймер (важно)

Этот код публикуется **в образовательных/исследовательских целях** как прототип архитектуры (планировщик задач + БД + генераторы).  
Не используйте его для действий, нарушающих правила сервисов/игр/платформ или законы.

### Технологии

- **Node.js** 
- **TypeScript**
- **Prisma** + **SQLite**

### Быстрый старт (локально)

#### 1) Установка

```bash
npm install
```

#### 2) Переменные окружения

Создайте файл `.env` в корне проекта:

```env
DATABASE_URL="file:./dev.db"
```

#### 3) Инициализация базы

Этот репозиторий не содержит миграций, поэтому самый простой способ — `db push`:

```bash
npx prisma generate
npx prisma db push
```

#### 4) Наполнить тестовыми аккаунтами (опционально)

В проекте есть сидер `src/db/seed.ts` (добавляет дефолтные аккаунты, если таблица пустая).  
Запуск:

```bash
npx ts-node src/db/seed.ts
```

#### 5) Запуск “фермы”

```bash
npx ts-node src/app.ts
```

### Концепция работы

- **`accounts.next_start_timestamp`**: Unix‑timestamp (ms). Если меньше текущего времени — аккаунт “доступен”.
- `src/app.ts`:
  - циклом подгружает доступные аккаунты;
  - держит пул активных аккаунтов (`maxActiveAccountsCount` в `src/configs.ts`).
- `src/account-manager.ts`: место, где должна выполняться реальная задача аккаунта (сейчас — заглушка).

Архитектурная схема (черновик) лежит в `docs/arch.drawio`.

### Структура репозитория

- `src/app.ts` — главный цикл приложения.
- `src/configs.ts` — конфигурация (например, лимит параллельных аккаунтов).
- `src/db/db-manager.ts` — доступ к БД (Prisma).
- `prisma/schema.prisma` — Prisma‑схема для SQLite.
- `src/keys/*` — наработки по генерации ключей и работе с запросами.
- `cube-dump*.json` — вспомогательные/тестовые данные.

### Ограничения / текущее состояние кода

- Проект **не доведён до end‑to‑end сценария**


